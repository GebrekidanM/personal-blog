(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,s)=>{t.exports=e.r(76562)},4581,e=>{"use strict";e.s(["api",()=>t]);let t="http://localhost:4000/api"},63394,e=>{"use strict";e.s(["default",()=>l]);var t=e.i(71645),s=e.i(18566);let l=()=>{let[e,l]=(0,t.useState)(!1),[a,r]=(0,t.useState)(!0),i=(0,s.useRouter)();return(0,t.useEffect)(()=>{localStorage.getItem("authToken")?l(!0):i.push("/admin/login"),r(!1)},[i]),{isAuthenticated:e,loading:a}}},89162,e=>{"use strict";e.s(["default",()=>n]);var t=e.i(43476),s=e.i(71645),l=e.i(81949),a=e.i(18566),r=e.i(63394),i=e.i(86478),o=e.i(4581),d=e.i(22016);function n(){let{isAuthenticated:e,loading:n}=(0,r.default)(),c=(0,a.useRouter)(),[u,m]=(0,s.useState)(""),[h,g]=(0,s.useState)(""),[x,b]=(0,s.useState)(""),[p,f]=(0,s.useState)(""),[j,y]=(0,s.useState)("Strategic Insights"),[N,v]=(0,s.useState)(""),[w,S]=(0,s.useState)(!1),[k,C]=(0,s.useState)(""),[P,T]=(0,s.useState)(!1);(0,s.useEffect)(()=>{g(u.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,""))},[u]);let I=async e=>{let t=e.target.files[0];if(!t)return;let s=new FormData;s.append("image",t),T(!0),v("Uploading image...");try{let e=localStorage.getItem("authToken"),t=await l.default.post("".concat(o.api,"/upload"),s,{headers:{"Content-Type":"multipart/form-data","x-auth-token":e}});C(t.data.imageUrl),v("Image uploaded successfully!")}catch(e){console.error("Image upload error:",e),v("Image upload failed.")}finally{T(!1)}},F=async e=>{e.preventDefault(),S(!0),v("Publishing...");try{let e=localStorage.getItem("authToken");if(!e)throw Error("Authentication error.");await l.default.post("".concat(o.api,"/posts"),{title:u,slug:h,excerpt:x,content:p,category:j,featuredImageUrl:k},{headers:{"x-auth-token":e}}),v("Post published successfully!"),setTimeout(()=>c.push("/admin/posts"),1500)}catch(e){var t,s;v((null==(s=e.response)||null==(t=s.data)?void 0:t.msg)||"Failed to publish post.")}finally{S(!1)}};return n?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:"Loading..."}):!1!==e||n?(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsx)(d.default,{href:"/admin/dashboard",className:"text-blue-600 hover:underline mb-4 inline-block",children:"â† Back to Dashboard"}),(0,t.jsxs)("form",{onSubmit:F,children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Create New Post"}),(0,t.jsx)("button",{type:"submit",disabled:w,className:"bg-blue-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-blue-700 transition disabled:bg-blue-300 disabled:cursor-not-allowed",children:w?"Publishing...":"Publish Post"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,t.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Title"}),(0,t.jsx)("input",{type:"text",id:"title",value:u,onChange:e=>m(e.target.value),required:!0,className:"mt-1 block w-full text-xl p-2 border-2 border-gray-200 rounded-md outline-0"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 p-4 pb-0",children:"Content"}),(0,t.jsx)(i.default,{content:p,onContentChange:e=>f(e)})]})]}),(0,t.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[N&&(0,t.jsx)("p",{className:"text-center text-sm text-gray-600 p-4 bg-gray-100 rounded",children:N}),(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold border-b pb-2 mb-4",children:"Post Settings"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Category"}),(0,t.jsxs)("select",{id:"category",value:j,onChange:e=>y(e.target.value),className:"mt-1 block w-full p-2 border-2 border-gray-200 outline-0 rounded-md",children:[(0,t.jsx)("option",{children:"Strategic Insights"}),(0,t.jsx)("option",{children:"Operational Excellence"}),(0,t.jsx)("option",{children:"Leadership & Culture"})]})]}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("label",{htmlFor:"slug",className:"block text-sm font-medium text-gray-700",children:"Slug (URL)"}),(0,t.jsx)("input",{type:"text",id:"slug",value:h,readOnly:!0,className:"mt-1 block w-full p-2 border-2 border-gray-200 outline-0 rounded-md bg-gray-100"})]}),(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold border-b pb-2 mb-4",children:"Featured Image"}),(0,t.jsx)("input",{type:"file",id:"image",onChange:I,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),P&&(0,t.jsx)("p",{className:"mt-2 text-sm",children:"Uploading..."}),k&&(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)("img",{src:k,alt:"Preview",className:"w-full h-auto rounded-md"})})]})]}),(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold border-b pb-2 mb-4",children:"Excerpt"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"A short summary of the post for previews."}),(0,t.jsx)("textarea",{id:"excerpt",value:x,onChange:e=>b(e.target.value),required:!0,rows:"5",className:"mt-1 block w-full p-2 border-2 border-gray-200 outline-0 rounded-md"})]})]})]})]})]}):(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsx)("p",{className:"text-red-600 font-bold",children:"You must be logged in to access this page."})})}}]);