(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,s)=>{t.exports=e.r(76562)},4581,e=>{"use strict";e.s(["api",()=>t]);let t="http://localhost:4000/api"},63394,e=>{"use strict";e.s(["default",()=>a]);var t=e.i(71645),s=e.i(18566);let a=()=>{let[e,a]=(0,t.useState)(!1),[l,i]=(0,t.useState)(!0),c=(0,s.useRouter)();return(0,t.useEffect)(()=>{localStorage.getItem("authToken")?a(!0):c.push("/admin/login"),i(!1)},[c]),{isAuthenticated:e,loading:l}}},48686,e=>{"use strict";e.s(["default",()=>r]);var t=e.i(43476),s=e.i(71645),a=e.i(81949),l=e.i(22016),i=e.i(63394),c=e.i(92199),d=e.i(4581);function r(){let{isAuthenticated:e,loading:r}=(0,i.default)(),[n,o]=(0,s.useState)([]),[h,u]=(0,s.useState)("Loading posts..."),m=async()=>{try{if(!localStorage.getItem("authToken"))return void u("Authentication error.");let e=await a.default.get("".concat(d.api,"/posts"));o(e.data),0===e.data.length?u("No posts found. Create your first one!"):u("")}catch(e){console.error("Failed to fetch posts:",e),u("Failed to load posts.")}};(0,s.useEffect)(()=>{e&&m()},[e]);let x=async e=>{if(window.confirm("Are you sure you want to delete this post? This action cannot be undone."))try{let t=localStorage.getItem("authToken");await a.default.delete("".concat(d.api,"/posts/").concat(e),{headers:{"x-auth-token":t}}),m(),u("Post deleted successfully.")}catch(e){console.error("Failed to delete post:",e),u("Failed to delete post.")}};return r?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:"Loading..."}):!1!==e||r?(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsx)(l.default,{href:"/admin/dashboard",className:"text-blue-600 hover:underline mb-4 inline-block",children:"← Back to Dashboard"}),(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Manage Posts"}),(0,t.jsxs)(l.default,{href:"/admin/posts/new",className:"flex items-center bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700 transition",children:[(0,t.jsx)(c.FiPlusCircle,{className:"mr-2"}),"Create New Post"]})]}),h&&(0,t.jsx)("p",{className:"text-center my-4",children:h}),n.length>0&&(0,t.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:(0,t.jsxs)("table",{className:"w-full text-left",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b",children:[(0,t.jsx)("th",{className:"py-2",children:"Title"}),(0,t.jsx)("th",{className:"py-2 hidden md:table-cell",children:"Category"}),(0,t.jsx)("th",{className:"py-2 hidden sm:table-cell",children:"Date"}),(0,t.jsx)("th",{className:"py-2 text-right",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:n.map(e=>(0,t.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"py-4 font-semibold",children:e.title}),(0,t.jsx)("td",{className:"py-4 hidden md:table-cell",children:e.category}),(0,t.jsx)("td",{className:"py-4 hidden sm:table-cell",children:new Date(e.publishedAt).toLocaleDateString()}),(0,t.jsxs)("td",{className:"py-4 flex justify-end space-x-2",children:[(0,t.jsx)(l.default,{href:"/admin/posts/edit/".concat(e._id),className:"p-2 text-blue-600 hover:text-blue-800",title:"Edit",children:(0,t.jsx)(c.FiEdit,{size:18})}),(0,t.jsx)("button",{onClick:()=>x(e._id),className:"p-2 text-red-600 hover:text-red-800",title:"Delete",children:(0,t.jsx)(c.FiTrash2,{size:18})})]})]},e._id))})]})})]}):(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsx)("p",{className:"text-red-600 font-bold",children:"You must be logged in to access this page."})})}}]);