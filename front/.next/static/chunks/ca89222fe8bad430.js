(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,l)=>{t.exports=e.r(76562)},4581,e=>{"use strict";e.s(["api",()=>t]);let t="http://localhost:4000/api"},63394,e=>{"use strict";e.s(["default",()=>a]);var t=e.i(71645),l=e.i(18566);let a=()=>{let[e,a]=(0,t.useState)(!1),[s,i]=(0,t.useState)(!0),r=(0,l.useRouter)();return(0,t.useEffect)(()=>{localStorage.getItem("authToken")?a(!0):r.push("/admin/login"),i(!1)},[r]),{isAuthenticated:e,loading:s}}},55697,e=>{"use strict";e.s(["default",()=>d]);var t=e.i(43476),l=e.i(71645),a=e.i(81949),s=e.i(18566),i=e.i(86478),r=e.i(4581);function d(e){let{initialPostData:d}=e,n=(0,s.useRouter)(),[o,c]=(0,l.useState)({title:d.title||"",slug:d.slug||"",excerpt:d.excerpt||"",category:d.category||"Strategic Insights",featuredImageUrl:d.featuredImageUrl||""}),[u,m]=(0,l.useState)(d.content||""),[g,p]=(0,l.useState)(""),[x,h]=(0,l.useState)(!1),[b,f]=(0,l.useState)(!1),j=e=>{let{name:t,value:l}=e.target;c(e=>({...e,[t]:l}))};(0,l.useEffect)(()=>{let e=o.title.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"");c(t=>({...t,slug:e}))},[o.title]);let y=async e=>{let t=e.target.files[0];if(!t)return;let l=new FormData;l.append("image",t),f(!0),p("Uploading image...");try{let e=localStorage.getItem("authToken"),t=await a.default.post("".concat(r.api,"/upload"),l,{headers:{"Content-Type":"multipart/form-data","x-auth-token":e}});c(e=>({...e,featuredImageUrl:t.data.imageUrl})),p("Image uploaded successfully!")}catch(e){p("Image upload failed.")}finally{f(!1)}},v=async e=>{e.preventDefault(),h(!0),p("Updating post...");try{let e=localStorage.getItem("authToken"),t={...o,content:u};await a.default.put("".concat(r.api,"/posts/").concat(d._id),t,{headers:{"x-auth-token":e}}),p("Post updated successfully!"),setTimeout(()=>n.push("/admin/posts"),1500)}catch(e){var t,l;p((null==(l=e.response)||null==(t=l.data)?void 0:t.msg)||"Failed to update post.")}finally{h(!1)}};return(0,t.jsxs)("form",{onSubmit:v,children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Edit Post"}),(0,t.jsx)("button",{type:"submit",disabled:x||b,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 transition disabled:bg-green-300 disabled:cursor-not-allowed",children:x?"Saving...":"Save Changes"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Title"}),(0,t.jsx)("input",{type:"text",id:"title",name:"title",value:o.title,onChange:j,required:!0,className:"mt-1 block w-full text-2xl p-2 border-gray-300 rounded-md"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"excerpt",className:"block text-sm font-medium text-gray-700",children:"Excerpt"}),(0,t.jsx)("textarea",{id:"excerpt",name:"excerpt",value:o.excerpt,onChange:j,required:!0,rows:"3",className:"mt-1 block w-full input"})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg p-2 shadow",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 p-4 pb-0",children:"Content"}),(0,t.jsx)(i.default,{content:u,onContentChange:m})]})]}),(0,t.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[g&&(0,t.jsx)("p",{className:"text-center text-sm p-4 bg-gray-100 rounded",children:g}),(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold border-b pb-2 mb-4",children:"Featured Image"}),(0,t.jsx)("input",{type:"file",id:"image",onChange:y,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),b&&(0,t.jsx)("p",{className:"mt-2 text-sm",children:"Uploading..."}),o.featuredImageUrl&&(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)("img",{src:o.featuredImageUrl,alt:"Preview",className:"w-full h-auto rounded-md"})})]}),(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold border-b pb-2 mb-4",children:"Post Settings"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Category"}),(0,t.jsxs)("select",{id:"category",name:"category",value:o.category,onChange:j,className:"mt-1 block w-full input",children:[(0,t.jsx)("option",{children:"Strategic Insights"}),(0,t.jsx)("option",{children:"Operational Excellence"}),(0,t.jsx)("option",{children:"Leadership & Culture"})]})]}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("label",{htmlFor:"slug",className:"block text-sm font-medium text-gray-700",children:"Slug (URL)"}),(0,t.jsx)("input",{type:"text",id:"slug",name:"slug",value:o.slug,readOnly:!0,className:"mt-1 block w-full input bg-gray-100"})]})]})]})]})]})}}]);